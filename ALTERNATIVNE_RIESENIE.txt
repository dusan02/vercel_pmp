# 游댃 ALTERNAT칈VNE RIEENIE - Ak PORT=3000 nefunguje

# === Mo쬹os콘 1: Zmeni콘 exec_mode na fork namiesto cluster ===
# Cluster mode m칪쬰 ma콘 probl칠my s environment premenn칳mi

# 1. Upravi콘 ecosystem.config.js (do캜asne zmeni콘 exec_mode na fork)
# Zmeni콘: exec_mode: "cluster" na exec_mode: "fork"
# Zmeni콘: instances: "max" na instances: 1

# 2. Re코tartova콘
pm2 stop premarketprice
pm2 delete premarketprice
pm2 start ecosystem.config.js --only premarketprice --env production

# === Mo쬹os콘 2: Vytvori콘 .env s칰bor ===
# 1. Vytvori콘 .env s칰bor
cd /var/www/premarketprice
echo "PORT=3000" > .env
echo "NODE_ENV=production" >> .env
echo "ENABLE_WEBSOCKET=true" >> .env

# 2. Re코tartova콘
pm2 stop premarketprice
pm2 delete premarketprice
pm2 start ecosystem.config.js --only premarketprice --env production

# === Mo쬹os콘 3: Skontrolova콘, 캜i nie je PORT nastaven칳 v syst칠me ===
# 1. Skontrolova콘 syst칠mov칠 premenn칠
env | grep PORT

# 2. Ak je tam PORT=3001, odstr치ni콘 ho
unset PORT

# 3. Spusti콘 s explicitn칳m PORT=3000
PORT=3000 pm2 start ecosystem.config.js --only premarketprice --env production

# === Mo쬹os콘 4: Upravi콘 server.ts priamo (do캜asne) ===
# 1. Skontrolova콘 server.ts
cat server.ts | grep -A 2 "const port"

# 2. Ak je tam probl칠m, m칪쬰me do캜asne hardcoded nastavi콘 port 3000
# (ale to nie je ide치lne rie코enie)

