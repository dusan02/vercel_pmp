# üîß JEDEN PR√çKAZ - OPRAVI≈§ 502 BAD GATEWAY (NA SERVERI)

echo "=== 1. PM2 STATUS ===" && pm2 list | grep -E "(earnings|name|status)" && echo "" && echo "=== 2. PORT 5555 ===" && ss -tlnp | grep 5555 && echo "" && echo "=== 3. TEST LOK√ÅLNEHO SERVERA ===" && curl -s -o /dev/null -w "HTTP Status: %{http_code}\n" http://127.0.0.1:5555 && echo "" && echo "=== 4. N√ÅJST NGINX CONFIG ===" && (NGINX_FILE=$(find /etc/nginx/sites-enabled -name "*earningstable*" 2>/dev/null | head -1) && if [ -z "$NGINX_FILE" ]; then NGINX_FILE="/etc/nginx/nginx.conf"; fi && echo "Config file: $NGINX_FILE" && grep -A 2 "proxy_pass" "$NGINX_FILE" 2>/dev/null | grep -E "(proxy_pass|5555|3000|app_servers)" | head -5) && echo "" && echo "=== 5. OPRAVA NGINX ===" && (NGINX_FILE=$(find /etc/nginx/sites-enabled -name "*earningstable*" 2>/dev/null | head -1) && if [ -z "$NGINX_FILE" ]; then if grep -q "earningstable.com" /etc/nginx/nginx.conf 2>/dev/null; then NGINX_FILE="/etc/nginx/nginx.conf"; else echo "‚ö†Ô∏è Nginx config file not found"; exit 1; fi; fi && sed -i 's|proxy_pass http://app_servers;|proxy_pass http://127.0.0.1:5555;|g' "$NGINX_FILE" && sed -i 's|proxy_pass http://127.0.0.1:3000;|proxy_pass http://127.0.0.1:5555;|g' "$NGINX_FILE" && echo "‚úÖ Nginx config updated: $NGINX_FILE" && nginx -t && systemctl reload nginx && echo "‚úÖ Nginx reloaded" || echo "‚ùå Nginx reload failed") && echo "" && echo "=== 6. FIN√ÅLNY TEST ===" && curl -k -s -o /dev/null -w "HTTPS Status: %{http_code}\n" https://earningstable.com && echo "" && echo "‚úÖ HOTOVO!"

