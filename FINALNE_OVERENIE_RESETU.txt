# 游댌 FIN츼LNE OVERENIE RESETU TABULKY (spr치vne n치zvy tabuliek)

## JEDEN PR칈KAZ (v코etko naraz - FIN츼LNA VERZIA):
```bash
cd /var/www/earnings-table && echo "=== 1. 캛AS 칔PRAVY DATAB츼ZY ===" && ls -lh modules/database/prisma/prod.db && echo "" && echo "=== 2. TRUKT칔RA TABU컇KY final_report ===" && sqlite3 modules/database/prisma/prod.db ".schema final_report" && echo "" && echo "=== 3. PM2 STATUS - H컇ADANIE earnings-cron ===" && pm2 list | grep -E "(earnings-cron|earnings-table)" && echo "" && echo "=== 4. SQLITE - POSLEDN칄 Z츼ZNAMY Z final_report ===" && sqlite3 modules/database/prisma/prod.db "SELECT datetime(created_at, 'localtime') as created, datetime(updated_at, 'localtime') as updated, symbol, date(report_date) as report_date FROM final_report ORDER BY created_at DESC LIMIT 10;" 2>/dev/null || echo "Chyba pri 캜칤tan칤 final_report" && echo "" && echo "=== 5. SQLITE - PO캛ET Z츼ZNAMOV POD컇A D츼TUMU (final_report) ===" && sqlite3 modules/database/prisma/prod.db "SELECT date(report_date) as datum, COUNT(*) as pocet FROM final_report GROUP BY date(report_date) ORDER BY datum DESC LIMIT 10;" 2>/dev/null || echo "Chyba" && echo "" && echo "=== 6. SQLITE - NAJSTARIE Z츼ZNAMY (final_report) ===" && sqlite3 modules/database/prisma/prod.db "SELECT datetime(created_at, 'localtime') as created, symbol, date(report_date) as datum FROM final_report ORDER BY created_at ASC LIMIT 5;" 2>/dev/null || echo "Chyba" && echo "" && echo "=== 7. SQLITE - CELKOV칗 PO캛ET Z츼ZNAMOV ===" && sqlite3 modules/database/prisma/prod.db "SELECT COUNT(*) as celkovy_pocet FROM final_report;" 2>/dev/null || echo "Chyba" && echo "" && echo "=== 8. AKTU츼LNY 캛AS NA SERVERI ===" && date && echo "" && echo "=== 9. AKTU츼LNY 캛AS V AMERICA/NEW_YORK ===" && TZ=America/New_York date && echo "" && echo "=== 10. PM2 - SPUSTI콗 earnings-cron (ak nie je spusten칳) ===" && pm2 list | grep earnings-cron || (echo "earnings-cron nie je v PM2, sp칰코콘am..." && pm2 start ecosystem.config.js --only earnings-cron --env production && sleep 2 && pm2 list | grep earnings-cron) && echo "" && echo "=== 11. PM2 LOGY - earnings-cron (posledn칳ch 50 riadkov) ===" && pm2 logs earnings-cron --lines 50 --nostream 2>&1 | tail -40
```

## POSTUPN칄 PR칈KAZY:

### 1. 맚rukt칰ra tabu쬶y final_report:
```bash
sqlite3 modules/database/prisma/prod.db ".schema final_report"
```

### 2. Posledn칠 z치znamy z final_report:
```bash
sqlite3 modules/database/prisma/prod.db "SELECT datetime(created_at, 'localtime') as created, symbol, date(report_date) as datum FROM final_report ORDER BY created_at DESC LIMIT 10;"
```

### 3. Po캜et z치znamov pod쬬 d치tumu:
```bash
sqlite3 modules/database/prisma/prod.db "SELECT date(report_date) as datum, COUNT(*) as pocet FROM final_report GROUP BY date(report_date) ORDER BY datum DESC LIMIT 10;"
```

### 4. Spusti콘 earnings-cron (ak nie je spusten칳):
```bash
pm2 start ecosystem.config.js --only earnings-cron --env production
```

### 5. PM2 logy earnings-cron:
```bash
pm2 logs earnings-cron --lines 100 --nostream
```

