# 游댌 OVERENIE RESETU TABULKY CEZ POLNOC

## JEDEN PR칈KAZ (v코etko naraz):
```bash
cd /var/www/earnings-table && echo "=== 1. 캛AS 칔PRAVY DATAB츼ZY ===" && ls -lh modules/database/prisma/prod.db && echo "" && echo "=== 2. PM2 STATUS - earnings-cron ===" && pm2 list | grep -E "(earnings-cron|earnings-table)" && echo "" && echo "=== 3. PM2 LOGY - earnings-cron (posledn칳ch 50 riadkov) ===" && pm2 logs earnings-cron --lines 50 --nostream 2>&1 | tail -30 && echo "" && echo "=== 4. SQLITE - POSLEDN칄 Z츼ZNAMY (top 5) ===" && sqlite3 modules/database/prisma/prod.db "SELECT datetime(created_at, 'localtime') as created, datetime(updated_at, 'localtime') as updated, symbol, report_date FROM final_report ORDER BY created_at DESC LIMIT 5;" 2>/dev/null || echo "Chyba pri 캜칤tan칤 datab치zy" && echo "" && echo "=== 5. SQLITE - NAJSTARIE Z츼ZNAMY (top 5) ===" && sqlite3 modules/database/prisma/prod.db "SELECT datetime(created_at, 'localtime') as created, datetime(updated_at, 'localtime') as updated, symbol, report_date FROM final_report ORDER BY created_at ASC LIMIT 5;" 2>/dev/null || echo "Chyba pri 캜칤tan칤 datab치zy" && echo "" && echo "=== 6. SQLITE - PO캛ET Z츼ZNAMOV POD컇A D츼TUMU ===" && sqlite3 modules/database/prisma/prod.db "SELECT date(report_date) as datum, COUNT(*) as pocet FROM final_report GROUP BY date(report_date) ORDER BY datum DESC LIMIT 10;" 2>/dev/null || echo "Chyba pri 캜칤tan칤 datab치zy" && echo "" && echo "=== 7. AKTU츼LNY 캛AS NA SERVERI ===" && date && echo "" && echo "=== 8. CRON SCHEDULE Z ECOSYSTEM ===" && cat ecosystem.config.js | grep -A 10 "earnings-cron" | grep -E "(cron|schedule|name)" | head -5
```

## POSTUPN칄 PR칈KAZY:

### 1. 캛as 칰pravy datab치zy:
```bash
ls -lh modules/database/prisma/prod.db
```

### 2. PM2 status - earnings-cron:
```bash
pm2 list | grep earnings-cron
```

### 3. PM2 logy - earnings-cron:
```bash
pm2 logs earnings-cron --lines 100 --nostream
```

### 4. SQLite - posledn칠 z치znamy:
```bash
sqlite3 modules/database/prisma/prod.db "SELECT datetime(created_at, 'localtime') as created, symbol, report_date FROM final_report ORDER BY created_at DESC LIMIT 10;"
```

### 5. SQLite - po캜et z치znamov pod쬬 d치tumu:
```bash
sqlite3 modules/database/prisma/prod.db "SELECT date(report_date) as datum, COUNT(*) as pocet FROM final_report GROUP BY date(report_date) ORDER BY datum DESC LIMIT 10;"
```

### 6. Aktu치lny 캜as na serveri:
```bash
date
```

### 7. Cron schedule z ecosystem.config.js:
```bash
cat ecosystem.config.js | grep -A 15 "earnings-cron"
```

