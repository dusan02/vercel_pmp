# 游댌 OPRAVEN칄 OVERENIE RESETU (spr치vne n치zvy st컄pcov)

## JEDEN PR칈KAZ (v코etko naraz - OPRAVEN칄):
```bash
cd /var/www/earnings-table && echo "=== 1. 캛AS 칔PRAVY DATAB츼ZY ===" && ls -lh modules/database/prisma/prod.db && echo "" && echo "=== 2. SQLITE - POSLEDN칄 Z츼ZNAMY Z final_report (OPRAVEN칄) ===" && sqlite3 modules/database/prisma/prod.db "SELECT datetime(createdAt, 'localtime') as created, datetime(updatedAt, 'localtime') as updated, symbol, date(reportDate) as report_date FROM final_report ORDER BY createdAt DESC LIMIT 10;" 2>/dev/null && echo "" && echo "=== 3. SQLITE - PO캛ET Z츼ZNAMOV POD컇A D츼TUMU (OPRAVEN칄) ===" && sqlite3 modules/database/prisma/prod.db "SELECT date(reportDate) as datum, COUNT(*) as pocet FROM final_report GROUP BY date(reportDate) ORDER BY datum DESC LIMIT 10;" 2>/dev/null && echo "" && echo "=== 4. SQLITE - NAJSTARIE Z츼ZNAMY (OPRAVEN칄) ===" && sqlite3 modules/database/prisma/prod.db "SELECT datetime(createdAt, 'localtime') as created, symbol, date(reportDate) as datum FROM final_report ORDER BY createdAt ASC LIMIT 5;" 2>/dev/null && echo "" && echo "=== 5. SQLITE - CELKOV칗 PO캛ET Z츼ZNAMOV ===" && sqlite3 modules/database/prisma/prod.db "SELECT COUNT(*) as celkovy_pocet FROM final_report;" 2>/dev/null && echo "" && echo "=== 6. SQLITE - KEDY BOLI Z츼ZNAMY VYTVOREN칄 (pod쬬 hodiny) ===" && sqlite3 modules/database/prisma/prod.db "SELECT strftime('%Y-%m-%d %H:00', createdAt, 'localtime') as hodina, COUNT(*) as pocet FROM final_report GROUP BY strftime('%Y-%m-%d %H:00', createdAt, 'localtime') ORDER BY hodina DESC LIMIT 20;" 2>/dev/null && echo "" && echo "=== 7. AKTU츼LNY 캛AS NA SERVERI ===" && date && echo "" && echo "=== 8. AKTU츼LNY 캛AS V AMERICA/NEW_YORK ===" && TZ=America/New_York date && echo "" && echo "=== 9. PM2 STATUS - earnings-cron ===" && pm2 list | grep earnings-cron && echo "" && echo "=== 10. CRON SCHEDULE INFO ===" && echo "Daily clear job: 0 3 * * 1-5 (03:00 NY, Mon-Fri) = 09:00 CET (v zime) / 08:00 CET (v lete)"
```

## POSTUPN칄 PR칈KAZY:

### 1. Posledn칠 z치znamy (OPRAVEN칄):
```bash
sqlite3 modules/database/prisma/prod.db "SELECT datetime(createdAt, 'localtime') as created, symbol, date(reportDate) as report_date FROM final_report ORDER BY createdAt DESC LIMIT 10;"
```

### 2. Po캜et z치znamov pod쬬 d치tumu (OPRAVEN칄):
```bash
sqlite3 modules/database/prisma/prod.db "SELECT date(reportDate) as datum, COUNT(*) as pocet FROM final_report GROUP BY date(reportDate) ORDER BY datum DESC LIMIT 10;"
```

### 3. Kedy boli z치znamy vytvoren칠 (pod쬬 hodiny):
```bash
sqlite3 modules/database/prisma/prod.db "SELECT strftime('%Y-%m-%d %H:00', createdAt, 'localtime') as hodina, COUNT(*) as pocet FROM final_report GROUP BY strftime('%Y-%m-%d %H:00', createdAt, 'localtime') ORDER BY hodina DESC LIMIT 20;"
```

### 4. Najstar코ie z치znamy:
```bash
sqlite3 modules/database/prisma/prod.db "SELECT datetime(createdAt, 'localtime') as created, symbol, date(reportDate) as datum FROM final_report ORDER BY createdAt ASC LIMIT 5;"
```

