# üîß OPRAVA TPL, STZ, NOW - PRE LINUX SERVER (BASH)
# Tieto pr√≠kazy s√∫ urƒçen√© na spustenie na produkƒçnom serveri cez SSH (bash shell)
# NIE pre PowerShell!

# ============================================
# JEDEN PR√çKAZ (v≈°etko naraz)
# ============================================
cd /var/www/premarketprice && echo "=== 1. AKTU√ÅLNE HODNOTY ===" && npx prisma db execute --stdin <<< "SELECT \"symbol\", \"name\", \"sector\", \"industry\" FROM \"Ticker\" WHERE \"symbol\" IN ('TPL', 'STZ', 'NOW') ORDER BY \"symbol\";" && echo "" && echo "=== 2. APLIKOVANIE OPRAV ===" && npx prisma db execute --stdin <<< "UPDATE \"Ticker\" SET \"sector\" = 'Real Estate', \"industry\" = 'REIT - Specialty', \"updatedAt\" = datetime('now') WHERE \"symbol\" = 'TPL';" && npx prisma db execute --stdin <<< "UPDATE \"Ticker\" SET \"sector\" = 'Consumer Defensive', \"industry\" = 'Beverages - Alcoholic', \"updatedAt\" = datetime('now') WHERE \"symbol\" = 'STZ';" && npx prisma db execute --stdin <<< "UPDATE \"Ticker\" SET \"sector\" = 'Technology', \"industry\" = 'Software', \"updatedAt\" = datetime('now') WHERE \"symbol\" = 'NOW';" && echo "" && echo "=== 3. OVERENIE OPRAV ===" && npx prisma db execute --stdin <<< "SELECT \"symbol\", \"name\", \"sector\", \"industry\" FROM \"Ticker\" WHERE \"symbol\" IN ('TPL', 'STZ', 'NOW') ORDER BY \"symbol\";" && echo "" && echo "‚úÖ Oprava dokonƒçen√°!"

# ============================================
# POSTUPN√â PR√çKAZY (ak chcete vidie≈• ka≈æd√Ω krok)
# ============================================

# 1. Prejs≈• do adres√°ra
cd /var/www/premarketprice

# 2. Skontrolova≈• aktu√°lne hodnoty
echo "=== Aktu√°lne hodnoty ==="
npx prisma db execute --stdin <<< "SELECT \"symbol\", \"name\", \"sector\", \"industry\" FROM \"Ticker\" WHERE \"symbol\" IN ('TPL', 'STZ', 'NOW') ORDER BY \"symbol\";"

# 3. Opravi≈• TPL
echo ""
echo "=== Opravujem TPL ==="
npx prisma db execute --stdin <<< "UPDATE \"Ticker\" SET \"sector\" = 'Real Estate', \"industry\" = 'REIT - Specialty', \"updatedAt\" = datetime('now') WHERE \"symbol\" = 'TPL';"

# 4. Opravi≈• STZ
echo ""
echo "=== Opravujem STZ ==="
npx prisma db execute --stdin <<< "UPDATE \"Ticker\" SET \"sector\" = 'Consumer Defensive', \"industry\" = 'Beverages - Alcoholic', \"updatedAt\" = datetime('now') WHERE \"symbol\" = 'STZ';"

# 5. Opravi≈• NOW
echo ""
echo "=== Opravujem NOW ==="
npx prisma db execute --stdin <<< "UPDATE \"Ticker\" SET \"sector\" = 'Technology', \"industry\" = 'Software', \"updatedAt\" = datetime('now') WHERE \"symbol\" = 'NOW';"

# 6. Overi≈• opravy
echo ""
echo "=== Overenie oprav ==="
npx prisma db execute --stdin <<< "SELECT \"symbol\", \"name\", \"sector\", \"industry\" FROM \"Ticker\" WHERE \"symbol\" IN ('TPL', 'STZ', 'NOW') ORDER BY \"symbol\";"

echo ""
echo "‚úÖ Hotovo!"

