# 游댌 DETAILN칗 TEST REQUESTOV NA SERVER

# ============================================
# MO콯NOS콗 1: Sledovanie access logu (hlavn칳 test)
# ============================================
tail -f /var/log/nginx/access.log

# Potom otvorte v prehliada캜i: https://premarketprice.com
# Mali by ste vidie콘 riadky typu:
# 89.185.250.213 - - [24/Dec/2025:23:40:00 +0000] "GET / HTTP/2.0" 200 12345 "https://premarketprice.com" "Mozilla/5.0..."

# ============================================
# MO콯NOS콗 2: Sledovanie error logu s칰캜asne
# ============================================
# V inom termin치li alebo pou쬴콘 multitail:
tail -f /var/log/nginx/error.log

# ============================================
# MO콯NOS콗 3: Sledovanie oboch logov naraz
# ============================================
tail -f /var/log/nginx/access.log /var/log/nginx/error.log

# ============================================
# MO콯NOS콗 4: Sledovanie s filtrom (len premarketprice.com)
# ============================================
tail -f /var/log/nginx/access.log | grep premarketprice

# ============================================
# MO콯NOS콗 5: Posledn칳ch 50 riadkov + sledovanie
# ============================================
tail -n 50 -f /var/log/nginx/access.log

# ============================================
# MO콯NOS콗 6: Sledovanie s 캜asovou zna캜kou
# ============================================
tail -f /var/log/nginx/access.log | while read line; do echo "[$(date '+%H:%M:%S')] $line"; done

# ============================================
# DIAGNOSTIKA: Ak ni캜 nevid칤te
# ============================================
# 1. Skontrolova콘, 캜i Nginx loguje spr치vne:
ls -la /var/log/nginx/access.log

# 2. Skontrolova콘 Nginx konfigur치ciu:
grep -r "access_log" /etc/nginx/

# 3. Test priameho requestu z servera:
curl -I https://premarketprice.com

# 4. Skontrolova콘, 캜i port 443 je otvoren칳:
ss -tlnp | grep 443

# 5. Skontrolova콘 firewall:
iptables -L -n | grep -E '(80|443)'

# ============================================
# POMOCN칄 PR칈KAZY
# ============================================
# Zobrazi콘 posledn칳ch 20 requestov:
tail -n 20 /var/log/nginx/access.log

# Po캜칤ta콘 requesty za posledn칰 min칰tu:
tail -n 1000 /var/log/nginx/access.log | grep "$(date '+%d/%b/%Y:%H:%M')" | wc -l

# Zobrazi콘 len chybov칠 requesty:
tail -f /var/log/nginx/access.log | grep -E "(4[0-9]{2}|5[0-9]{2})"

