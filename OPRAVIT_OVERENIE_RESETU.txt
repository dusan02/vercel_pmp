# 游댌 OPRAVEN칄 OVERENIE RESETU TABULKY

## JEDEN PR칈KAZ (v코etko naraz - opraven칠):
```bash
cd /var/www/earnings-table && echo "=== 1. 캛AS 칔PRAVY DATAB츼ZY ===" && ls -lh modules/database/prisma/prod.db && echo "" && echo "=== 2. VETKY TABU컇KY V DATAB츼ZE ===" && sqlite3 modules/database/prisma/prod.db ".tables" && echo "" && echo "=== 3. PM2 STATUS - VETKY PROCESY ===" && pm2 list && echo "" && echo "=== 4. ECOSYSTEM CONFIG - earnings-cron ===" && cat ecosystem.config.js | grep -A 20 "earnings-cron" && echo "" && echo "=== 5. SQLITE - POSLEDN칄 Z츼ZNAMY Z EarningsCalendar ===" && sqlite3 modules/database/prisma/prod.db "SELECT datetime(createdAt, 'localtime') as created, datetime(updatedAt, 'localtime') as updated, ticker, date(date) as report_date FROM EarningsCalendar ORDER BY createdAt DESC LIMIT 5;" 2>/dev/null || echo "Chyba pri 캜칤tan칤 EarningsCalendar" && echo "" && echo "=== 6. SQLITE - PO캛ET Z츼ZNAMOV POD컇A D츼TUMU (EarningsCalendar) ===" && sqlite3 modules/database/prisma/prod.db "SELECT date(date) as datum, COUNT(*) as pocet FROM EarningsCalendar GROUP BY date(date) ORDER BY datum DESC LIMIT 10;" 2>/dev/null || echo "Chyba" && echo "" && echo "=== 7. SQLITE - AK EXISTUJE FinalReport ===" && sqlite3 modules/database/prisma/prod.db "SELECT datetime(createdAt, 'localtime') as created, symbol, date(report_date) as datum FROM FinalReport ORDER BY createdAt DESC LIMIT 5;" 2>/dev/null || echo "FinalReport neexistuje alebo chyba" && echo "" && echo "=== 8. AKTU츼LNY 캛AS NA SERVERI ===" && date && echo "" && echo "=== 9. PM2 LOGY - earnings-cron (ak existuje) ===" && pm2 logs earnings-cron --lines 30 --nostream 2>&1 | tail -20 || echo "earnings-cron nie je v PM2"
```

## POSTUPN칄 PR칈KAZY:

### 1. Zisti콘 v코etky tabu쬶y:
```bash
sqlite3 modules/database/prisma/prod.db ".tables"
```

### 2. PM2 status - v코etky procesy:
```bash
pm2 list
```

### 3. Ecosystem config - earnings-cron:
```bash
cat ecosystem.config.js | grep -A 20 "earnings-cron"
```

### 4. SQLite - posledn칠 z치znamy (EarningsCalendar):
```bash
sqlite3 modules/database/prisma/prod.db "SELECT datetime(createdAt, 'localtime') as created, ticker, date(date) as report_date FROM EarningsCalendar ORDER BY createdAt DESC LIMIT 10;"
```

### 5. SQLite - po캜et z치znamov pod쬬 d치tumu:
```bash
sqlite3 modules/database/prisma/prod.db "SELECT date(date) as datum, COUNT(*) as pocet FROM EarningsCalendar GROUP BY date(date) ORDER BY datum DESC LIMIT 10;"
```

### 6. Aktu치lny 캜as:
```bash
date
```

