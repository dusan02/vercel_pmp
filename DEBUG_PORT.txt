# 游댌 DEBUG PORTU - Kop칤rova콘 a spusti콘 na serveri

# === KROK 1: Skontrolova콘, 캜i port 3000 nie je obsaden칳 ===
ss -tlnp | grep 3000

# === KROK 2: Skontrolova콘 .env s칰bor ===
cd /var/www/premarketprice
cat .env

# === KROK 3: Skontrolova콘 PM2 environment premenn칠 ===
pm2 describe premarketprice | grep -A 30 "env:"

# === KROK 4: Re코tartova콘 s debug v칳pisom ===
# Najprv mus칤me aktualizova콘 server.ts na serveri (pridan칳 debug v칳pis)
# Potom:
pm2 stop premarketprice
pm2 delete premarketprice
pm2 start ecosystem.config.js --only premarketprice --env production

# === KROK 5: Skontrolova콘 logy (h쬬da콘 DEBUG riadky) ===
sleep 10
pm2 logs premarketprice --lines 20 | grep -E "DEBUG|port|PORT"

# Mali by ste vidie콘:
# 游댌 DEBUG: process.env.PORT = 3000 (alebo undefined)
# 游댌 DEBUG: Using port = 3000 (alebo 3001)

# === KROK 6: Ak process.env.PORT je undefined, probl칠m je v PM2 ===
# Sk칰si콘 explicitne nastavi콘 v ecosystem.config.js alebo pou쬴콘 .env s칰bor

