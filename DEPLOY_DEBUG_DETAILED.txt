cd /var/www/premarketprice && \
echo "=== 1. GIT PULL ===" && \
git pull origin main && \
echo "" && \
echo "=== 2. REÅ TARTOVANIE ===" && \
pm2 restart premarketprice && \
sleep 5 && \
echo "" && \
echo "=== 3. PM2 STATUS ===" && \
pm2 list | grep premarketprice && \
echo "" && \
echo "=== 4. TEST API - Volanie /api/stocks?limit=10 ===" && \
curl -s "http://localhost:3000/api/stocks?limit=10" > /dev/null && \
echo "âœ… API volanie dokonÄenÃ©" && \
echo "" && \
echo "=== 5. POÄŒKANIE 5 SEKÃšND ===" && \
sleep 5 && \
echo "" && \
echo "=== 6. PM2 LOGY - hÄ¾adanie debug logov (ğŸ”, ğŸ“Š, âš ï¸, âœ…) ===" && \
pm2 logs premarketprice --lines 300 --nostream 2>&1 | grep -i -E "(ğŸ”|ğŸ“Š|âš ï¸|âœ…|NVDA|GOOG|MSFT|marketCapDiff|calculatedPct|prevClose|Method)" | tail -80 || echo "âš ï¸ Å½iadne relevantnÃ© logy" && \
echo "" && \
echo "=== 7. KONTROLA DB - marketCapDiff po API volanÃ­ ===" && \
DB="prisma/data/premarket.db" && \
sqlite3 "$DB" "SELECT symbol, lastMarketCap, lastMarketCapDiff, lastPrice, latestPrevClose, sharesOutstanding FROM Ticker WHERE symbol IN ('NVDA', 'GOOG', 'MSFT') ORDER BY lastMarketCap DESC;" 2>&1 && \
echo "" && \
pm2 save && \
echo "" && \
echo "âœ… Hotovo! Skontroluj logy vyÅ¡Å¡ie - mali by ste vidieÅ¥ ğŸ”, ğŸ“Š, âš ï¸ alebo âœ… pre NVDA/GOOG/MSFT."

