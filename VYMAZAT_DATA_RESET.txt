# ğŸ—‘ï¸ VYMAZAÅ¤ DÃTA V TABUÄ½KÃCH (nie tabuÄ¾ky samotnÃ©)

# === KROK 1: ZastaviÅ¥ earnings-cron ===
pm2 stop earnings-cron

# === KROK 2: ZastaviÅ¥ earnings-table ===
pm2 stop earnings-table

# === KROK 3: VymazaÅ¥ dÃ¡ta v tabuÄ¾kÃ¡ch cez Prisma ===
cd /var/www/earnings-table/modules/database
npx prisma db execute --stdin <<EOF
DELETE FROM FinhubData;
DELETE FROM PolygonData;
DELETE FROM FinalReport;
EOF

# Alebo jednoduchÅ¡ie - pouÅ¾iÅ¥ Prisma Studio alebo priamy SQL prÃ­kaz
# sqlite3 /var/www/earnings-table/modules/database/prisma/prod.db "DELETE FROM FinhubData; DELETE FROM PolygonData; DELETE FROM FinalReport;"

# === KROK 4: SpustiÅ¥ earnings-table ===
cd /var/www/earnings-table
pm2 start earnings-table

# === KROK 5: SpustiÅ¥ earnings-cron ===
pm2 start earnings-cron

# === KROK 6: UloÅ¾iÅ¥ PM2 konfigurÃ¡ciu ===
pm2 save

# === KROK 7: SkontrolovaÅ¥ status ===
pm2 status

