# üîç DIAGNOSTIKA PROBL√âMU S marketCapDiff

cd /var/www/premarketprice && \
echo "=== 1. SKONTROLOVA≈§, KTOR√â TICKERY MAJ√ö sharesOutstanding = 0 alebo NULL ===" && \
npx prisma db execute --stdin <<EOF
SELECT symbol, name, sharesOutstanding, lastPrice, latestPrevClose, lastMarketCapDiff 
FROM "Ticker" 
WHERE (sharesOutstanding IS NULL OR sharesOutstanding = 0) 
  AND lastPrice > 0 
  AND latestPrevClose > 0
ORDER BY lastMarketCap DESC NULLS LAST
LIMIT 20;
EOF
echo "" && \
echo "=== 2. SKONTROLOVA≈§ VEƒΩK√â SPOLOƒåNOSTI (top 20 podƒæa market cap) ===" && \
npx prisma db execute --stdin <<EOF
SELECT symbol, name, sharesOutstanding, lastPrice, latestPrevClose, lastMarketCap, lastMarketCapDiff 
FROM "Ticker" 
WHERE lastMarketCap > 0
ORDER BY lastMarketCap DESC
LIMIT 20;
EOF
echo "" && \
echo "=== 3. POƒåET TICKEROV S sharesOutstanding = 0 alebo NULL ===" && \
npx prisma db execute --stdin <<EOF
SELECT COUNT(*) as pocet 
FROM "Ticker" 
WHERE (sharesOutstanding IS NULL OR sharesOutstanding = 0) 
  AND lastPrice > 0;
EOF
echo "" && \
echo "‚úÖ Hotovo!"

