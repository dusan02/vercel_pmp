# üîê NASTAVENIE SSL PRE PREMARKETPRICE.COM
# Server: 89.185.250.213
# Pou≈æ√≠vateƒæ: root (nie sudo)

# ============================================
# KROK 1: Overi≈•, ƒçi je Nginx nain≈°talovan√Ω
# ============================================
nginx -v

# ============================================
# KROK 2: Overi≈•, ƒçi je Certbot nain≈°talovan√Ω
# ============================================
certbot --version

# Ak nie je nain≈°talovan√Ω:
apt update
apt install -y nginx certbot python3-certbot-nginx

# ============================================
# KROK 3: Skontrolova≈• firewall (porty 80 a 443)
# ============================================
ufw status
# Ak porty nie s√∫ otvoren√©:
ufw allow 80/tcp
ufw allow 443/tcp
ufw reload

# ============================================
# KROK 4: Overi≈• DNS (premarketprice.com ‚Üí 89.185.250.213)
# ============================================
dig premarketprice.com +short
dig www.premarketprice.com +short

# ============================================
# KROK 5: Skontrolova≈•, ƒçi Nginx be≈æ√≠
# ============================================
systemctl status nginx

# Ak nebe≈æ√≠:
systemctl start nginx
systemctl enable nginx

# ============================================
# KROK 6: Skontrolova≈• Nginx konfigur√°ciu
# ============================================
nginx -t

# ============================================
# KROK 7: VYTVORI≈§ SSL CERTIFIK√ÅT
# ============================================
# Certbot automaticky:
# - N√°jde Nginx config
# - Prid√° HTTPS
# - Nastav√≠ auto-renew

certbot --nginx -d premarketprice.com -d www.premarketprice.com

# ============================================
# KROK 8: Overi≈•, ƒçi sa certifik√°ty vygenerovali
# ============================================
ls -la /etc/letsencrypt/live/premarketprice.com/

# ============================================
# KROK 9: Re≈°tartova≈• Nginx
# ============================================
systemctl restart nginx
systemctl status nginx

# ============================================
# KROK 10: Overi≈• SSL certifik√°t
# ============================================
curl -I https://premarketprice.com
curl -I https://www.premarketprice.com

# ============================================
# KROK 11: Overi≈• auto-renew
# ============================================
certbot renew --dry-run

