# 游댌 DIAGNOSTIKA SSL PROBL칄MOV

# 1. Overenie, 캜i je Certbot nain코talovan칳
certbot --version

# 2. Overenie, 캜i je Nginx nain코talovan칳
nginx -v

# 3. Kontrola firewall portov
ufw status
ss -tlnp | grep -E ':(80|443)'

# 4. Kontrola DNS
dig premarketprice.com +short
dig www.premarketprice.com +short
nslookup premarketprice.com

# 5. Kontrola Nginx konfigur치cie
nginx -t
systemctl status nginx

# 6. Kontrola, 캜i certifik치ty existuj칰
ls -la /etc/letsencrypt/live/premarketprice.com/ 2>/dev/null || echo "Certifik치ty neexistuj칰"

# 7. Kontrola Nginx SSL konfigur치cie
grep -r "ssl_certificate" /etc/nginx/sites-enabled/
grep -r "premarketprice.com" /etc/nginx/

# 8. Test HTTP pripojenia
curl -I http://premarketprice.com

# 9. Test HTTPS pripojenia
curl -I https://premarketprice.com

# 10. Kontrola Let's Encrypt logov
tail -50 /var/log/letsencrypt/letsencrypt.log

# 11. Kontrola Nginx error logov
tail -50 /var/log/nginx/error.log

# 12. Kontrola, 캜i port 80 je dostupn칳 zvonka
# (spustite z in칠ho po캜칤ta캜a alebo pou쬴te online n치stroj)
# napr: https://www.yougetsignal.com/tools/open-ports/

# 13. Test SSL handshake
openssl s_client -connect premarketprice.com:443 -servername premarketprice.com < /dev/null

# 14. Kontrola certifik치tu (ak existuje)
openssl x509 -in /etc/letsencrypt/live/premarketprice.com/cert.pem -text -noout 2>/dev/null || echo "Certifik치t neexistuje"

# 15. Kontrola auto-renew
cat /etc/cron.d/certbot
certbot renew --dry-run

