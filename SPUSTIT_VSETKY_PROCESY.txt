# 游댢 SPUSTI콗 VETKY PROCESY - Kop칤rova콘 a spusti콘 na serveri

# === KROK 1: Prejs콘 do adres치ra ===
cd /var/www/premarketprice

# === KROK 2: Skontrolova콘 aktu치lny stav ===
pm2 status

# === KROK 3: Skontrolova콘 logy premarketprice (po캜ka콘 chv칤쬿, k칳m sa spust칤) ===
pm2 logs premarketprice --lines 30
# Mali by ste vidie콘: "游 Next.js server ready on http://localhost:3000"

# === KROK 4: Skontrolova콘, pre캜o sa nesp칰코콘aj칰 workers ===
# PM2 m칪쬰 spusti콘 len prv칳 proces. Skontrolova콘 ecosystem.config.js
cat ecosystem.config.js | grep -A 5 "name:"

# === KROK 5: Spusti콘 workers manu치lne ===
# Polygon worker
pm2 start ecosystem.config.js --only pmp-polygon-worker --env production

# Bulk preloader
pm2 start ecosystem.config.js --only pmp-bulk-preloader --env production

# === KROK 6: Skontrolova콘 status ===
pm2 status

# Mali by ste vidie콘:
# - premarketprice (online)
# - pmp-polygon-worker (online)
# - pmp-bulk-preloader (online alebo waiting)

# === KROK 7: Ulo쬴콘 ===
pm2 save

# === KROK 8: Skontrolova콘 porty ===
netstat -tlnp | grep -E "3000|3001"
# Mali by ste vidie콘: 127.0.0.1:3000 (nie 3001)

# === KROK 9: Skontrolova콘 logy workers ===
pm2 logs pmp-polygon-worker --lines 10
pm2 logs pmp-bulk-preloader --lines 10

