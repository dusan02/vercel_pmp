# 游댢 DO캛ASNE VYPN칔콗 HTTPS REDIRECT (pre testovanie) - Kop칤rova콘 a spusti콘 na serveri

# === KROK 1: N치js콘 Nginx konfigura캜n칳 s칰bor ===
# Nginx m칪쬰 pou쮂셨a콘 r칪zne konfigur치cie
nginx -T 2>&1 | grep "configuration file"

# Alebo skontrolova콘:
ls -la /etc/nginx/sites-enabled/
ls -la /etc/nginx/conf.d/

# === KROK 2: Z치lohova콘 konfigur치ciu ===
cp /etc/nginx/nginx.conf /etc/nginx/nginx.conf.backup
# Alebo ak pou쮂셨a sites-enabled:
# cp /etc/nginx/sites-enabled/default /etc/nginx/sites-enabled/default.backup

# === KROK 3: Do캜asne vypn칰콘 HTTPS redirect ===
# N치js콘 riadok: return 301 https://$host$request_uri;
# A komentova콘 ho: # return 301 https://$host$request_uri;

# Alebo pou쬴콘 sed:
sed -i 's/return 301 https:\/\/$host$request_uri;/# return 301 https:\/\/$host$request_uri; # Temporarily disabled/g' /etc/nginx/nginx.conf

# === KROK 4: Prida콘 HTTP server block, ktor칳 proxuje na port 3000 ===
# Alebo upravi콘 existuj칰ci HTTP block, aby proxoval namiesto redirectu

# === KROK 5: Testova콘 konfigur치ciu ===
nginx -t

# === KROK 6: Reload Nginx ===
systemctl reload nginx

# === KROK 7: Testova콘 HTTP ===
curl http://localhost/api/health
curl http://premarketprice.com/api/health

# === KROK 8: Ak funguje, m칪쬰te vr치ti콘 HTTPS redirect ===
# cp /etc/nginx/nginx.conf.backup /etc/nginx/nginx.conf
# A potom vygenerova콘 SSL certifik치ty

