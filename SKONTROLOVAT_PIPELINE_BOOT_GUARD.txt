# ðŸ” SKONTROLOVAÅ¤ PIPELINE A BOOT GUARD

cd /var/www/earnings-table && \
echo "=== 1. AKTUÃLNY POÄŒET ZÃZNAMOV ===" && \
sqlite3 modules/database/prisma/prod.db "SELECT COUNT(*) as pocet FROM final_report;" 2>/dev/null && \
echo "" && \
echo "=== 2. AKTUÃLNY ÄŒAS V NY ===" && \
TZ=America/New_York date && \
echo "" && \
echo "=== 3. SKONTROLOVAÅ¤ BOOT GUARD V KÃ“DE ===" && \
grep -r -i "boot.*guard\|03:00.*03:10\|no-op" modules/cron/src/ 2>/dev/null | head -10 || echo "âš ï¸ NenÃ¡jdenÃ©" && \
echo "" && \
echo "=== 4. PM2 LOGY - earnings-cron (poslednÃ½ch 50 riadkov, hÄ¾adanie pipeline aktivita) ===" && \
pm2 logs earnings-cron --lines 50 --nostream 2>&1 | grep -i -E "(pipeline|finnhub|polygon|fetch|running|executing|boot)" | tail -20 || echo "âš ï¸ Å½iadne vÃ½sledky" && \
echo "" && \
echo "=== 5. POÄŒKAÅ¤ 2 MINÃšTY A SKONTROLOVAÅ¤ ZNOVA (pipeline beÅ¾Ã­ kaÅ¾dÃ½ch 5 min) ===" && \
echo "ÄŒakÃ¡m 120 sekÃºnd..." && \
sleep 120 && \
sqlite3 modules/database/prisma/prod.db "SELECT COUNT(*) as pocet FROM final_report;" 2>/dev/null && \
echo "" && \
echo "=== 6. PM2 LOGY (novÃ©, poslednÃ½ch 30 riadkov) ===" && \
pm2 logs earnings-cron --lines 30 --nostream 2>&1 | tail -20 && \
echo "" && \
echo "âœ… Hotovo!"

